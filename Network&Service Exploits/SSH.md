# Port 22 - Secure Shell (SSH)
SSH allows users and administrators the ability to access a computer over an unsecure network. SSH provides password authentication or public key authentication while providing encrypted communication between two hosts connecting over an open network.

### Banner Grabbing
`nmap --script ssh-*`\
`nc <ipaddress> 22`\
`telnet <ipaddress> 22`

Once you get the server and version that is running, look up different vulnerabilities and exploits for those.

### Username Enumeration
OpenSSH 2.3 < 7.7 allows for username enumeration
```
msf> use scanner/ssh/ssh_enumusers
msf> set RHOST <ipaddress(es)>
msf> run
```

### Password Spray
Brute force attacks often lead to accounts getting locked out and unnecessary attempts and noise after lock out. A better approach is to try one password with multiple usernames. If you are able to use the username enumeration, then compile the successsful usernames into a wordlist and use like this:\
```
msf> use auxiliary/scanner/ssh/ssh_login
msf> set RHOST <ipaddress>
msf> set PASSWORD <password>
msf> set USER_FILE /path/to/wordlist
```
You can do this a couple times with different passwords, but probably not more than 3 times to avoid lockout.

### Login
If you are able to get a username and password, simply log in as such:
`ssh username@ipaddress`
